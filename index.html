<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Wolf MMO - Realistic Evolution</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/mrdoob/three.js@r128/examples/js/loaders/GLTFLoader.js"></script>
    <style>
        body { margin: 0; overflow: hidden; background: #1a2e15; touch-action: none; font-family: sans-serif; }
        #ui { position: fixed; top: 20px; left: 20px; color: white; background: rgba(0,0,0,0.7); padding: 15px; border-radius: 10px; z-index: 10; border-left: 4px solid #daa520; }
        #controls { position: fixed; bottom: 30px; width: 100%; display: flex; justify-content: space-around; z-index: 20; }
        .btn { width: 80px; height: 80px; background: rgba(255,255,255,0.2); border-radius: 50%; border: 2px solid white; display: flex; align-items: center; justify-content: center; font-size: 30px; color: white; }
    </style>
</head>
<body>
    <div id="ui">
        <b>üê∫ LOBO REALISTA</b><br>
        Nivel: <span id="lv">1</span> | Mapa: <span id="map">1</span>
    </div>

    <div id="controls">
        <div class="btn" id="joy">üïπÔ∏è</div>
        <div class="btn" onclick="atacar()" style="background: #8b0000;">üêæ</div>
    </div>

    <script>
        let scene, camera, renderer, wolf;
        let loader = new THREE.GLTFLoader();

        function init() {
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x6699ff);
            
            camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
            camera.position.set(0, 5, 10);

            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.shadowMap.enabled = true;
            document.body.appendChild(renderer.domElement);

            const light = new THREE.DirectionalLight(0xffffff, 1);
            light.position.set(5, 10, 5);
            light.castShadow = true;
            scene.add(light, new THREE.AmbientLight(0xffffff, 0.5));

            // Suelo con textura de bosque
            const ground = new THREE.Mesh(new THREE.PlaneGeometry(500, 500), new THREE.MeshStandardMaterial({color: 0x1b3012}));
            ground.rotation.x = -Math.PI/2;
            ground.receiveShadow = true;
            scene.add(ground);

            // CARGA DEL MODELO PROFESIONAL
            // Intentamos cargar un modelo de lobo real. Si no carga, creamos uno detallado con c√≥digo.
            loader.load('https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/Fox/glTF/Fox.gltf', (gltf) => {
                wolf = gltf.scene;
                wolf.scale.set(0.05, 0.05, 0.05); // Ajuste de tama√±o
                wolf.traverse(n => { if(n.isMesh) n.castShadow = true; });
                scene.add(wolf);
            }, undefined, () => {
                // Si falla el internet, creamos un lobo con partes separadas para que NO sea un bloque
                crearLoboDeEmergencia();
            });

            animate();
        }

        function crearLoboDeEmergencia() {
            wolf = new THREE.Group();
            const mat = new THREE.MeshStandardMaterial({color: 0x444444});
            const cuerpo = new THREE.Mesh(new THREE.CapsuleGeometry(0.5, 1.5, 4, 8), mat);
            cuerpo.rotation.x = Math.PI/2;
            const cabeza = new THREE.Mesh(new THREE.SphereGeometry(0.5, 16, 16), mat);
            cabeza.position.set(0, 0.5, 1);
            wolf.add(cuerpo, cabeza);
            scene.add(wolf);
        }

        function animate() {
            requestAnimationFrame(animate);
            if(wolf) {
                // Aqu√≠ ir√° el movimiento del joystick
                camera.lookAt(wolf.position);
            }
            renderer.render(scene, camera);
        }

        init();
    </script>
</body>
</html>
